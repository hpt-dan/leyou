{"remainingRequest":"C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\babel-loader\\lib\\index.js!C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\vuetify-loader\\lib\\loader.js!C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\develop\\idea-projects\\leyou-manage-web\\src\\views\\item\\specification\\SpecParam.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\develop\\idea-projects\\leyou-manage-web\\src\\views\\item\\specification\\SpecParam.vue","mtime":1552661122989},{"path":"C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1549812933000},{"path":"C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Object$assign from \"C:\\\\develop\\\\idea-projects\\\\leyou-manage-web\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/object/assign\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"v-spec-param\",\n  props: {\n    group: {\n      type: Object\n    }\n  },\n  data: function data() {\n    return {\n      headers: [{\n        text: \"id\",\n        value: \"id\",\n        align: \"center\",\n        sortable: false\n      }, {\n        text: \"参数名\",\n        value: \"name\",\n        align: \"center\",\n        sortable: false\n      }, {\n        text: \"是否为数值\",\n        value: \"numeric\",\n        align: \"center\",\n        sortable: false\n      }, {\n        text: \"单位\",\n        value: \"unit\",\n        align: \"center\",\n        sortable: false\n      }, {\n        text: \"是否通用\",\n        value: \"generic\",\n        align: \"center\",\n        sortable: false\n      }, {\n        text: \"是否可搜索\",\n        value: \"searching\",\n        align: \"center\",\n        sortable: false\n      }, {\n        text: \"操作\",\n        align: \"center\",\n        sortable: false\n      }],\n      params: [],\n      // 参数\n      show: false,\n      param: {},\n      isEdit: false\n    };\n  },\n  watch: {\n    group: {\n      deep: true,\n      handler: function handler(val) {\n        if (val && val.id) {\n          this.loadData();\n        }\n      }\n    }\n  },\n  methods: {\n    loadData: function loadData() {\n      var _this = this;\n\n      this.$http.get(\"/item/spec/params?gid=\" + this.group.id).then(function (_ref) {\n        var data = _ref.data;\n        data.forEach(function (p) {\n          p.segments = p.segments ? p.segments.split(\",\").map(function (s) {\n            return s.split(\"-\");\n          }) : [];\n        });\n        _this.params = data;\n      }).catch(function () {\n        _this.params = [];\n      });\n    },\n    editParam: function editParam(param) {\n      this.param = param;\n      this.isEdit = true;\n      this.show = true;\n    },\n    addParam: function addParam() {\n      this.param = {\n        cid: this.group.cid,\n        groupId: this.group.id,\n        segments: [],\n        numeric: false,\n        searching: false,\n        generic: false\n      };\n      this.show = true;\n    },\n    deleteParam: function deleteParam(id) {\n      var _this2 = this;\n\n      this.$message.confirm(\"确认要删除该参数吗？\").then(function () {\n        _this2.$http.delete(\"/item/spec/param/\" + id).then(function () {\n          _this2.$message.success(\"删除成功\");\n        }).catch(function () {\n          _this2.$message.error(\"删除失败\");\n        });\n      });\n    },\n    formatBoolean: function formatBoolean(boo) {\n      return boo ? \"是\" : \"否\";\n    },\n    save: function save() {\n      var _this3 = this;\n\n      var p = {};\n\n      _Object$assign(p, this.param);\n\n      p.segments = p.segments.map(function (s) {\n        return s.join(\"-\");\n      }).join(\",\");\n      this.$http({\n        method: this.isEdit ? 'put' : 'post',\n        url: '/item/spec/param',\n        data: p\n      }).then(function () {\n        // 关闭窗口\n        _this3.show = false;\n\n        _this3.$message.success(\"保存成功！\");\n\n        _this3.loadData();\n      }).catch(function () {\n        _this3.$message.error(\"保存失败！\");\n      });\n    }\n  }\n};",{"version":3,"sources":["SpecParam.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AADA,GAFA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,CACA;AAAA,QAAA,IAAA,EAAA,IAAA;AAAA,QAAA,KAAA,EAAA,IAAA;AAAA,QAAA,KAAA,EAAA,QAAA;AAAA,QAAA,QAAA,EAAA;AAAA,OADA,EAEA;AAAA,QAAA,IAAA,EAAA,KAAA;AAAA,QAAA,KAAA,EAAA,MAAA;AAAA,QAAA,KAAA,EAAA,QAAA;AAAA,QAAA,QAAA,EAAA;AAAA,OAFA,EAGA;AACA,QAAA,IAAA,EAAA,OADA;AACA,QAAA,KAAA,EAAA,SADA;AAEA,QAAA,KAAA,EAAA,QAFA;AAGA,QAAA,QAAA,EAAA;AAHA,OAHA,EAQA;AAAA,QAAA,IAAA,EAAA,IAAA;AAAA,QAAA,KAAA,EAAA,MAAA;AAAA,QAAA,KAAA,EAAA,QAAA;AAAA,QAAA,QAAA,EAAA;AAAA,OARA,EASA;AACA,QAAA,IAAA,EAAA,MADA;AAEA,QAAA,KAAA,EAAA,SAFA;AAGA,QAAA,KAAA,EAAA,QAHA;AAIA,QAAA,QAAA,EAAA;AAJA,OATA,EAeA;AACA,QAAA,IAAA,EAAA,OADA;AAEA,QAAA,KAAA,EAAA,WAFA;AAGA,QAAA,KAAA,EAAA,QAHA;AAIA,QAAA,QAAA,EAAA;AAJA,OAfA,EAqBA;AAAA,QAAA,IAAA,EAAA,IAAA;AAAA,QAAA,KAAA,EAAA,QAAA;AAAA,QAAA,QAAA,EAAA;AAAA,OArBA,CADA;AAwBA,MAAA,MAAA,EAAA,EAxBA;AAwBA;AACA,MAAA,IAAA,EAAA,KAzBA;AA0BA,MAAA,KAAA,EAAA,EA1BA;AA2BA,MAAA,MAAA,EAAA;AA3BA,KAAA;AA6BA,GArCA;AAsCA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,IADA;AAEA,MAAA,OAFA,mBAEA,GAFA,EAEA;AACA,YAAA,GAAA,IAAA,GAAA,CAAA,EAAA,EAAA;AACA,eAAA,QAAA;AACA;AACA;AANA;AADA,GAtCA;AAgDA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AACA,WAAA,KAAA,CACA,GADA,CACA,2BAAA,KAAA,KAAA,CAAA,EADA,EAEA,IAFA,CAEA,gBAAA;AAAA,YAAA,IAAA,QAAA,IAAA;AACA,QAAA,IAAA,CAAA,OAAA,CAAA,UAAA,CAAA,EAAA;AACA,UAAA,CAAA,CAAA,QAAA,GAAA,CAAA,CAAA,QAAA,GAAA,CAAA,CAAA,QAAA,CAAA,KAAA,CAAA,GAAA,EAAA,GAAA,CAAA,UAAA,CAAA;AAAA,mBAAA,CAAA,CAAA,KAAA,CAAA,GAAA,CAAA;AAAA,WAAA,CAAA,GAAA,EAAA;AACA,SAFA;AAGA,QAAA,KAAA,CAAA,MAAA,GAAA,IAAA;AACA,OAPA,EAQA,KARA,CAQA,YAAA;AACA,QAAA,KAAA,CAAA,MAAA,GAAA,EAAA;AACA,OAVA;AAWA,KAbA;AAcA,IAAA,SAdA,qBAcA,KAdA,EAcA;AACA,WAAA,KAAA,GAAA,KAAA;AACA,WAAA,MAAA,GAAA,IAAA;AACA,WAAA,IAAA,GAAA,IAAA;AACA,KAlBA;AAmBA,IAAA,QAnBA,sBAmBA;AACA,WAAA,KAAA,GAAA;AACA,QAAA,GAAA,EAAA,KAAA,KAAA,CAAA,GADA;AAEA,QAAA,OAAA,EAAA,KAAA,KAAA,CAAA,EAFA;AAGA,QAAA,QAAA,EAAA,EAHA;AAIA,QAAA,OAAA,EAAA,KAJA;AAKA,QAAA,SAAA,EAAA,KALA;AAMA,QAAA,OAAA,EAAA;AANA,OAAA;AAQA,WAAA,IAAA,GAAA,IAAA;AACA,KA7BA;AA8BA,IAAA,WA9BA,uBA8BA,EA9BA,EA8BA;AAAA;;AACA,WAAA,QAAA,CAAA,OAAA,CAAA,YAAA,EACA,IADA,CACA,YAAA;AACA,QAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,sBAAA,EAAA,EACA,IADA,CACA,YAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,MAAA;AACA,SAHA,EAIA,KAJA,CAIA,YAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,MAAA;AACA,SANA;AAOA,OATA;AAUA,KAzCA;AA0CA,IAAA,aA1CA,yBA0CA,GA1CA,EA0CA;AACA,aAAA,GAAA,GAAA,GAAA,GAAA,GAAA;AACA,KA5CA;AA6CA,IAAA,IA7CA,kBA6CA;AAAA;;AACA,UAAA,CAAA,GAAA,EAAA;;AACA,qBAAA,CAAA,EAAA,KAAA,KAAA;;AACA,MAAA,CAAA,CAAA,QAAA,GAAA,CAAA,CAAA,QAAA,CAAA,GAAA,CAAA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AAAA,OAAA,EAAA,IAAA,CAAA,GAAA,CAAA;AACA,WAAA,KAAA,CAAA;AACA,QAAA,MAAA,EAAA,KAAA,MAAA,GAAA,KAAA,GAAA,MADA;AAEA,QAAA,GAAA,EAAA,kBAFA;AAGA,QAAA,IAAA,EAAA;AAHA,OAAA,EAIA,IAJA,CAIA,YAAA;AACA;AACA,QAAA,MAAA,CAAA,IAAA,GAAA,KAAA;;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,OAAA;;AACA,QAAA,MAAA,CAAA,QAAA;AACA,OATA,EASA,KATA,CASA,YAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,OAAA;AACA,OAXA;AAYA;AA7DA;AAhDA,CAAA","sourcesContent":["<template>\n  <div>\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"params\"\n      hide-actions\n      class=\"elevation-0\"\n    >\n      <template slot=\"items\" slot-scope=\"props\">\n        <td class=\"text-xs-center\">{{ props.item.id }}</td>\n        <td class=\"text-xs-center\">{{ props.item.name }}</td>\n        <td class=\"text-xs-center\">{{ formatBoolean(props.item.numeric) }}</td>\n        <td class=\"text-xs-center\">{{ props.item.unit || '无' }}</td>\n        <td class=\"text-xs-center\">{{ formatBoolean(props.item.generic) }}</td>\n        <td class=\"text-xs-center\">{{ formatBoolean(props.item.searching) }}</td>\n        <td class=\"justify-center layout px-0\">\n          <v-btn icon @click=\"editParam(props.item)\">\n            <i class=\"el-icon-edit\"/>\n          </v-btn>\n          <v-btn icon @click=\"deleteParam(props.item.id)\">\n            <i class=\"el-icon-delete\"/>\n          </v-btn>\n        </td>\n      </template>\n      <template slot=\"no-data\">\n        该分组下没有参数\n      </template>\n    </v-data-table>\n    <v-btn color='primary' @click=\"addParam\">新增参数</v-btn>\n    <v-dialog v-model=\"show\" max-width=\"350px\" scrollable>\n      <v-card>\n        <v-card-text style=\"height: 300px;\">\n          <v-flex class=\"px-3\">\n            <v-text-field label=\"参数名称：\" v-model=\"param.name\"/>\n            <v-checkbox label=\"是否为通用属性\" v-model=\"param.generic\" color=\"primary\" hide-details/>\n            <v-checkbox label=\"是否为数值类型\" v-model=\"param.numeric\" color=\"primary\" hide-details/>\n            <v-text-field label=\"数值单位：\" v-model=\"param.unit\" v-if=\"param.numeric\"/>\n            <v-checkbox label=\"是否用于搜索\" v-model=\"param.searching\" color=\"primary\" hide-details/>\n            <v-flex v-if=\"param.searching && param.numeric\" class=\"px-2\">\n              搜索过滤区间：\n              <v-layout row wrap v-for=\"(s,i) in param.segments\" :key=\"i\">\n                <v-flex xs5>\n                  <v-text-field prefix=\"From: \" v-model=\"s[0]\" single-line hide-details/>\n                </v-flex>\n                <v-spacer/>\n                <v-flex xs5>\n                  <v-text-field prefix=\"To: \" v-model=\"s[1]\" single-line hide-details/>\n                </v-flex>\n                <v-flex xs1>\n                  <v-btn icon @click=\"param.segments.splice(i,1)\">\n                    <i class=\"el-icon-delete\"/>\n                  </v-btn>\n                </v-flex>\n              </v-layout>\n              <v-layout row>\n                <v-spacer/>\n                <v-flex xs1>\n                  <v-tooltip left>\n                    <v-btn slot=\"activator\" icon @click=\"param.segments.push([0,0])\">\n                      <v-icon>add</v-icon>\n                    </v-btn>\n                    <span>点击为数值类型的参数添加分段，便于搜索过滤</span>\n                  </v-tooltip>\n                </v-flex>\n              </v-layout>\n            </v-flex>\n          </v-flex>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer/>\n          <v-btn color=\"blue darken-1\" flat @click.native=\"show=false\">取消</v-btn>\n          <v-btn color=\"blue darken-1\" flat @click.native=\"save\">保存</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n<script>\n  export default {\n    name: \"v-spec-param\",\n    props: {\n      group: {\n        type: Object\n      }\n    },\n    data() {\n      return {\n        headers: [\n          {text: \"id\", value: \"id\", align: \"center\", sortable: false},\n          {text: \"参数名\", value: \"name\", align: \"center\", sortable: false},\n          {\n            text: \"是否为数值\", value: \"numeric\",\n            align: \"center\",\n            sortable: false\n          },\n          {text: \"单位\", value: \"unit\", align: \"center\", sortable: false},\n          {\n            text: \"是否通用\",\n            value: \"generic\",\n            align: \"center\",\n            sortable: false\n          },\n          {\n            text: \"是否可搜索\",\n            value: \"searching\",\n            align: \"center\",\n            sortable: false\n          },\n          {text: \"操作\", align: \"center\", sortable: false}\n        ],\n        params: [], // 参数\n        show: false,\n        param: {},\n        isEdit: false\n      };\n    },\n    watch: {\n      group: {\n        deep: true,\n        handler(val) {\n          if (val && val.id) {\n            this.loadData();\n          }\n        }\n      }\n    },\n    methods: {\n      loadData() {\n        this.$http\n          .get(\"/item/spec/params?gid=\" + this.group.id)\n          .then(({data}) => {\n            data.forEach(p => {\n              p.segments = p.segments ? p.segments.split(\",\").map(s => s.split(\"-\")) : [];\n            })\n            this.params = data;\n          })\n          .catch(() => {\n            this.params = [];\n          });\n      },\n      editParam(param) {\n        this.param = param;\n        this.isEdit = true;\n        this.show = true;\n      },\n      addParam() {\n        this.param = {\n          cid: this.group.cid,\n          groupId: this.group.id,\n          segments: [],\n          numeric: false,\n          searching: false,\n          generic: false\n        }\n        this.show = true;\n      },\n      deleteParam(id) {\n        this.$message.confirm(\"确认要删除该参数吗？\")\n          .then(() => {\n            this.$http.delete(\"/item/spec/param/\" + id)\n              .then(() => {\n                this.$message.success(\"删除成功\");\n              })\n              .catch(() => {\n                this.$message.error(\"删除失败\");\n              })\n          })\n      },\n      formatBoolean(boo) {\n        return boo ? \"是\" : \"否\";\n      },\n      save() {\n        const p = {};\n        Object.assign(p, this.param);\n        p.segments = p.segments.map(s => s.join(\"-\")).join(\",\")\n        this.$http({\n          method: this.isEdit ? 'put' : 'post',\n          url: '/item/spec/param',\n          data: p,\n        }).then(() => {\n          // 关闭窗口\n          this.show = false;\n          this.$message.success(\"保存成功！\");\n          this.loadData();\n        }).catch(() => {\n          this.$message.error(\"保存失败！\");\n        });\n      }\n    }\n  };\n</script>\n"],"sourceRoot":"src/views/item/specification"}]}