{"remainingRequest":"C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\babel-loader\\lib\\index.js!C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\vuetify-loader\\lib\\loader.js!C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\develop\\idea-projects\\leyou-manage-web\\src\\views\\item\\BrandForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\develop\\idea-projects\\leyou-manage-web\\src\\views\\item\\BrandForm.vue","mtime":1552990829392},{"path":"C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1549812933000},{"path":"C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectWithoutProperties from \"C:\\\\develop\\\\idea-projects\\\\leyou-manage-web\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectWithoutProperties\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"brand-form\",\n  props: {\n    oldBrand: {\n      type: Object\n    },\n    isEdit: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      valid: false,\n      // 表单校验结果标记\n      brand: {\n        name: '',\n        // 品牌名称\n        letter: '',\n        // 品牌首字母\n        image: '',\n        // 品牌logo\n        categories: [] // 品牌所属的商品分类数组\n\n      },\n      nameRules: [function (v) {\n        return !!v || \"品牌名称不能为空\";\n      }, function (v) {\n        return /^.{2,}$/.test(v) || \"品牌名称至少2位\";\n      }],\n      letterRules: [function (v) {\n        return !!v || \"首字母不能为空\";\n      }, function (v) {\n        return /^[a-zA-Z]$/.test(v) || \"品牌字母只能是1个字母\";\n      }]\n    };\n  },\n  methods: {\n    submit: function submit() {\n      var _this = this;\n\n      // 表单校验\n      if (this.$refs.myBrandForm.validate()) {\n        // 定义一个请求参数对象，通过解构表达式来获取brand中的属性\n        var _this$brand = this.brand,\n            categories = _this$brand.categories,\n            letter = _this$brand.letter,\n            params = _objectWithoutProperties(_this$brand, [\"categories\", \"letter\"]); // 数据库中只要保存分类的id即可，因此我们对categories的值进行处理,只保留id，并转为字符串\n\n\n        params.cids = categories.map(function (c) {\n          return c.id;\n        }).join(\",\"); // 将字母都处理为大写\n\n        params.letter = letter.toUpperCase(); // 将数据提交到后台\n        // this.$http.post('/item/brand', this.$qs.stringify(params))\n\n        this.$http({\n          method: this.isEdit ? 'put' : 'post',\n          url: '/item/brand',\n          data: this.$qs.stringify(params)\n        }).then(function () {\n          // 关闭窗口\n          _this.$emit(\"close\");\n\n          _this.$message.success(\"保存成功！\");\n        }).catch(function () {\n          _this.$message.error(\"保存失败！\");\n        });\n      }\n    },\n    clear: function clear() {\n      // 重置表单\n      this.$refs.myBrandForm.reset(); // 需要手动清空商品分类\n\n      this.categories = [];\n    },\n    close: function close() {\n      this.$emit(\"close\");\n    }\n  },\n  watch: {\n    oldBrand: {\n      // 监控oldBrand的变化\n      handler: function handler(val) {\n        if (val) {\n          // 注意不要直接复制，否则这边的修改会影响到父组件的数据，copy属性即可\n          this.brand = Object.deepCopy(val);\n        } else {\n          // 为空，初始化brand\n          this.brand = {\n            name: '',\n            letter: '',\n            image: '',\n            categories: []\n          };\n          this.$refs.myBrandForm.reset();\n        }\n      },\n      deep: true\n    }\n  }\n};",{"version":3,"sources":["BrandForm.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-card>\n    <v-card-title>\n      <span class=\"headline\" v-text=\"isEdit ? '修改品牌' : '新增品牌'\"></span>\n    </v-card-title>\n    <v-divider/>\n    <v-card-text class=\"px-3\">\n      <v-form v-model=\"valid\" ref=\"myBrandForm\">\n        <v-container grid-list-md>\n          <v-layout wrap>\n            <v-flex class=\"md6\">\n              <v-text-field v-model=\"brand.name\" label=\"品牌名称\" required :rules=\"nameRules\"/>\n            </v-flex>\n            <v-flex class=\"md6\">\n              <v-text-field v-model=\"brand.letter\" label=\"品牌首字母\" required :rules=\"letterRules\"/>\n            </v-flex>\n            <v-flex>\n              <v-cascader\n                url=\"/item/category/of/parent\"\n                multiple\n                required\n                v-model=\"brand.categories\"\n                label=\"商品分类\"/>\n            </v-flex>\n          </v-layout>\n          <v-layout row>\n            <v-flex md4>\n              <span class=\"subheading font-weight-thin\">品牌LOGO：</span>\n            </v-flex>\n            <v-flex>\n              <v-upload v-model=\"brand.image\" :multiple=\"false\" :pic-width=\"250\" :pic-height=\"90\"\n                        url=\"/upload/signature\" need-signature/>\n            </v-flex>\n          </v-layout>\n        </v-container>\n      </v-form>\n    </v-card-text>\n    <v-card-actions>\n      <v-spacer/>\n      <v-btn depressed  small @click=\"submit\">提交</v-btn>\n      <v-btn depressed small @click=\"clear\">重置</v-btn>\n      <v-btn depressed  small @click=\"close\">关闭</v-btn>\n    </v-card-actions>\n  </v-card>\n\n</template>\n\n<script>\n  export default {\n    name: \"brand-form\",\n    props: {\n      oldBrand: {\n        type: Object\n      },\n      isEdit: {\n        type: Boolean,\n        default: false\n      }\n    },\n    data() {\n      return {\n        valid: false, // 表单校验结果标记\n        brand: {\n          name: '', // 品牌名称\n          letter: '', // 品牌首字母\n          image: '',// 品牌logo\n          categories: [], // 品牌所属的商品分类数组\n        },\n        nameRules: [\n          v => !!v || \"品牌名称不能为空\",\n          v => /^.{2,}$/.test(v) || \"品牌名称至少2位\"\n        ],\n        letterRules: [\n          v => !!v || \"首字母不能为空\",\n          v => /^[a-zA-Z]$/.test(v) || \"品牌字母只能是1个字母\"\n        ]\n      }\n    },\n    methods: {\n      submit() {\n        // 表单校验\n        if (this.$refs.myBrandForm.validate()) {\n          // 定义一个请求参数对象，通过解构表达式来获取brand中的属性\n          const {categories, letter, ...params} = this.brand;\n          // 数据库中只要保存分类的id即可，因此我们对categories的值进行处理,只保留id，并转为字符串\n          params.cids = categories.map(c => c.id).join(\",\");\n          // 将字母都处理为大写\n          params.letter = letter.toUpperCase();\n          // 将数据提交到后台\n          // this.$http.post('/item/brand', this.$qs.stringify(params))\n          this.$http({\n            method: this.isEdit ? 'put' : 'post',\n            url: '/item/brand',\n            data: this.$qs.stringify(params)\n          }).then(() => {\n            // 关闭窗口\n            this.$emit(\"close\");\n            this.$message.success(\"保存成功！\");\n          })\n            .catch(() => {\n              this.$message.error(\"保存失败！\");\n            });\n        }\n      },\n      clear() {\n        // 重置表单\n        this.$refs.myBrandForm.reset();\n        // 需要手动清空商品分类\n        this.categories = [];\n      },\n      close(){\n        this.$emit(\"close\");\n      }\n    },\n    watch: {\n      oldBrand: {// 监控oldBrand的变化\n        handler(val) {\n          if (val) {\n            // 注意不要直接复制，否则这边的修改会影响到父组件的数据，copy属性即可\n            this.brand = Object.deepCopy(val)\n          } else {\n            // 为空，初始化brand\n            this.brand = {\n              name: '',\n              letter: '',\n              image: '',\n              categories: [],\n            };\n            this.$refs.myBrandForm.reset();\n          }\n        },\n        deep: true\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>\n"],"sourceRoot":"src/views/item"}]}