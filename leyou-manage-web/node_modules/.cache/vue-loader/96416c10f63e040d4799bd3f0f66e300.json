{"remainingRequest":"C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\develop\\idea-projects\\leyou-manage-web\\src\\views\\item\\specification\\SpecParam.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\develop\\idea-projects\\leyou-manage-web\\src\\views\\item\\specification\\SpecParam.vue","mtime":1552661122989},{"path":"C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1549812933000},{"path":"C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\develop\\idea-projects\\leyou-manage-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  name: \"v-spec-param\",\n  props: {\n    group: {\n      type: Object\n    }\n  },\n  data() {\n    return {\n      headers: [\n        {text: \"id\", value: \"id\", align: \"center\", sortable: false},\n        {text: \"参数名\", value: \"name\", align: \"center\", sortable: false},\n        {\n          text: \"是否为数值\", value: \"numeric\",\n          align: \"center\",\n          sortable: false\n        },\n        {text: \"单位\", value: \"unit\", align: \"center\", sortable: false},\n        {\n          text: \"是否通用\",\n          value: \"generic\",\n          align: \"center\",\n          sortable: false\n        },\n        {\n          text: \"是否可搜索\",\n          value: \"searching\",\n          align: \"center\",\n          sortable: false\n        },\n        {text: \"操作\", align: \"center\", sortable: false}\n      ],\n      params: [], // 参数\n      show: false,\n      param: {},\n      isEdit: false\n    };\n  },\n  watch: {\n    group: {\n      deep: true,\n      handler(val) {\n        if (val && val.id) {\n          this.loadData();\n        }\n      }\n    }\n  },\n  methods: {\n    loadData() {\n      this.$http\n        .get(\"/item/spec/params?gid=\" + this.group.id)\n        .then(({data}) => {\n          data.forEach(p => {\n            p.segments = p.segments ? p.segments.split(\",\").map(s => s.split(\"-\")) : [];\n          })\n          this.params = data;\n        })\n        .catch(() => {\n          this.params = [];\n        });\n    },\n    editParam(param) {\n      this.param = param;\n      this.isEdit = true;\n      this.show = true;\n    },\n    addParam() {\n      this.param = {\n        cid: this.group.cid,\n        groupId: this.group.id,\n        segments: [],\n        numeric: false,\n        searching: false,\n        generic: false\n      }\n      this.show = true;\n    },\n    deleteParam(id) {\n      this.$message.confirm(\"确认要删除该参数吗？\")\n        .then(() => {\n          this.$http.delete(\"/item/spec/param/\" + id)\n            .then(() => {\n              this.$message.success(\"删除成功\");\n            })\n            .catch(() => {\n              this.$message.error(\"删除失败\");\n            })\n        })\n    },\n    formatBoolean(boo) {\n      return boo ? \"是\" : \"否\";\n    },\n    save() {\n      const p = {};\n      Object.assign(p, this.param);\n      p.segments = p.segments.map(s => s.join(\"-\")).join(\",\")\n      this.$http({\n        method: this.isEdit ? 'put' : 'post',\n        url: '/item/spec/param',\n        data: p,\n      }).then(() => {\n        // 关闭窗口\n        this.show = false;\n        this.$message.success(\"保存成功！\");\n        this.loadData();\n      }).catch(() => {\n        this.$message.error(\"保存失败！\");\n      });\n    }\n  }\n};\n",{"version":3,"sources":["SpecParam.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SpecParam.vue","sourceRoot":"src/views/item/specification","sourcesContent":["<template>\n  <div>\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"params\"\n      hide-actions\n      class=\"elevation-0\"\n    >\n      <template slot=\"items\" slot-scope=\"props\">\n        <td class=\"text-xs-center\">{{ props.item.id }}</td>\n        <td class=\"text-xs-center\">{{ props.item.name }}</td>\n        <td class=\"text-xs-center\">{{ formatBoolean(props.item.numeric) }}</td>\n        <td class=\"text-xs-center\">{{ props.item.unit || '无' }}</td>\n        <td class=\"text-xs-center\">{{ formatBoolean(props.item.generic) }}</td>\n        <td class=\"text-xs-center\">{{ formatBoolean(props.item.searching) }}</td>\n        <td class=\"justify-center layout px-0\">\n          <v-btn icon @click=\"editParam(props.item)\">\n            <i class=\"el-icon-edit\"/>\n          </v-btn>\n          <v-btn icon @click=\"deleteParam(props.item.id)\">\n            <i class=\"el-icon-delete\"/>\n          </v-btn>\n        </td>\n      </template>\n      <template slot=\"no-data\">\n        该分组下没有参数\n      </template>\n    </v-data-table>\n    <v-btn color='primary' @click=\"addParam\">新增参数</v-btn>\n    <v-dialog v-model=\"show\" max-width=\"350px\" scrollable>\n      <v-card>\n        <v-card-text style=\"height: 300px;\">\n          <v-flex class=\"px-3\">\n            <v-text-field label=\"参数名称：\" v-model=\"param.name\"/>\n            <v-checkbox label=\"是否为通用属性\" v-model=\"param.generic\" color=\"primary\" hide-details/>\n            <v-checkbox label=\"是否为数值类型\" v-model=\"param.numeric\" color=\"primary\" hide-details/>\n            <v-text-field label=\"数值单位：\" v-model=\"param.unit\" v-if=\"param.numeric\"/>\n            <v-checkbox label=\"是否用于搜索\" v-model=\"param.searching\" color=\"primary\" hide-details/>\n            <v-flex v-if=\"param.searching && param.numeric\" class=\"px-2\">\n              搜索过滤区间：\n              <v-layout row wrap v-for=\"(s,i) in param.segments\" :key=\"i\">\n                <v-flex xs5>\n                  <v-text-field prefix=\"From: \" v-model=\"s[0]\" single-line hide-details/>\n                </v-flex>\n                <v-spacer/>\n                <v-flex xs5>\n                  <v-text-field prefix=\"To: \" v-model=\"s[1]\" single-line hide-details/>\n                </v-flex>\n                <v-flex xs1>\n                  <v-btn icon @click=\"param.segments.splice(i,1)\">\n                    <i class=\"el-icon-delete\"/>\n                  </v-btn>\n                </v-flex>\n              </v-layout>\n              <v-layout row>\n                <v-spacer/>\n                <v-flex xs1>\n                  <v-tooltip left>\n                    <v-btn slot=\"activator\" icon @click=\"param.segments.push([0,0])\">\n                      <v-icon>add</v-icon>\n                    </v-btn>\n                    <span>点击为数值类型的参数添加分段，便于搜索过滤</span>\n                  </v-tooltip>\n                </v-flex>\n              </v-layout>\n            </v-flex>\n          </v-flex>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer/>\n          <v-btn color=\"blue darken-1\" flat @click.native=\"show=false\">取消</v-btn>\n          <v-btn color=\"blue darken-1\" flat @click.native=\"save\">保存</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n<script>\n  export default {\n    name: \"v-spec-param\",\n    props: {\n      group: {\n        type: Object\n      }\n    },\n    data() {\n      return {\n        headers: [\n          {text: \"id\", value: \"id\", align: \"center\", sortable: false},\n          {text: \"参数名\", value: \"name\", align: \"center\", sortable: false},\n          {\n            text: \"是否为数值\", value: \"numeric\",\n            align: \"center\",\n            sortable: false\n          },\n          {text: \"单位\", value: \"unit\", align: \"center\", sortable: false},\n          {\n            text: \"是否通用\",\n            value: \"generic\",\n            align: \"center\",\n            sortable: false\n          },\n          {\n            text: \"是否可搜索\",\n            value: \"searching\",\n            align: \"center\",\n            sortable: false\n          },\n          {text: \"操作\", align: \"center\", sortable: false}\n        ],\n        params: [], // 参数\n        show: false,\n        param: {},\n        isEdit: false\n      };\n    },\n    watch: {\n      group: {\n        deep: true,\n        handler(val) {\n          if (val && val.id) {\n            this.loadData();\n          }\n        }\n      }\n    },\n    methods: {\n      loadData() {\n        this.$http\n          .get(\"/item/spec/params?gid=\" + this.group.id)\n          .then(({data}) => {\n            data.forEach(p => {\n              p.segments = p.segments ? p.segments.split(\",\").map(s => s.split(\"-\")) : [];\n            })\n            this.params = data;\n          })\n          .catch(() => {\n            this.params = [];\n          });\n      },\n      editParam(param) {\n        this.param = param;\n        this.isEdit = true;\n        this.show = true;\n      },\n      addParam() {\n        this.param = {\n          cid: this.group.cid,\n          groupId: this.group.id,\n          segments: [],\n          numeric: false,\n          searching: false,\n          generic: false\n        }\n        this.show = true;\n      },\n      deleteParam(id) {\n        this.$message.confirm(\"确认要删除该参数吗？\")\n          .then(() => {\n            this.$http.delete(\"/item/spec/param/\" + id)\n              .then(() => {\n                this.$message.success(\"删除成功\");\n              })\n              .catch(() => {\n                this.$message.error(\"删除失败\");\n              })\n          })\n      },\n      formatBoolean(boo) {\n        return boo ? \"是\" : \"否\";\n      },\n      save() {\n        const p = {};\n        Object.assign(p, this.param);\n        p.segments = p.segments.map(s => s.join(\"-\")).join(\",\")\n        this.$http({\n          method: this.isEdit ? 'put' : 'post',\n          url: '/item/spec/param',\n          data: p,\n        }).then(() => {\n          // 关闭窗口\n          this.show = false;\n          this.$message.success(\"保存成功！\");\n          this.loadData();\n        }).catch(() => {\n          this.$message.error(\"保存失败！\");\n        });\n      }\n    }\n  };\n</script>\n"]}]}